<form style="padding-left: 20px;" (ngSubmit)="submitChequeReq()">
  <mat-form-field>
    <input matInput currencyMask [options]='{allowZero: false}' placeholder="Pre-tax Amount" type="tel" min="0.01" [formControl]="minPreTaxControl"
           [(ngModel)]="chequeReq.preTax" required name="preTax" (blur)="hasNaNCheck(chequeReq.preTax)"/>
    <mat-error>
      You must enter a Pre-tax amount of at least $0.01
    </mat-error>
  </mat-form-field>
  <mat-form-field>
    <input matInput currencyMask placeholder="GST" type="tel" [(ngModel)]="chequeReq.GST" #GST="ngModel" name="GST" (blur)="hasNaNCheck()"/>
  </mat-form-field>
  <mat-form-field>
    <input matInput currencyMask placeholder="PST" type="tel" [(ngModel)]="chequeReq.PST" #PST="ngModel" name="PST" (blur)="hasNaNCheck()"/>
  </mat-form-field>
  <mat-form-field>
    <input matInput currencyMask placeholder="HST" type="tel" [(ngModel)]="chequeReq.HST" #HST="ngModel" name="HST" (blur)="hasNaNCheck()"/>
  </mat-form-field>
  <mat-form-field>
    <input matInput currencyMask readonly placeholder="Total" [value]="updateTotal()|currency"/>
  </mat-form-field>
  <mat-form-field>
    <mat-select matInput [(value)]="chequeReq.account" required>
      <mat-option *ngFor="let account of accounts$ | async" [value]="account">{{ account.number }} - {{ account.name }}</mat-option>
    </mat-select>
  </mat-form-field>
  <div>
    <br>
    <mat-form-field>
      <textarea matInput placeholder="Description" [(ngModel)]="chequeReq.description" #description="ngModel" name="description" matTextareaAutosize
        matAutosizeMinRows="2" matAutosizeMaxRows="5" required></textarea>
      <mat-error *ngIf="description.errors?.required">
        You need to enter a description
      </mat-error>
    </mat-form-field>
  </div>
  <div>
    <mat-checkbox [(ngModel)]="chequeReq.onlinePurchase" name="onlinePurchase">This cheque req is for an online purchase</mat-checkbox>
    <p style="font-size: small; font-style: italic;" *ngIf="chequeReq.onlinePurchase">
      Note! You must upload a proof of payment. For example a Credit Card statement or screenshot that includes the date, merchant,
      amount, cardholder name and last 4 digits of the card. Uploading an invoice or order confirmation alone is not sufficient.
    </p>
  </div>

  <p>Please upload supporting documents:</p>
  <td-file-upload #fileMultipleUpload name="documents" [(ngModel)]="chequeReq.files" (select)="selectMultipleEvent($event)" (upload)="uploadMultipleEvent($event)" (cancel)="cancelMultipleEvent()"
                  accept="image/*,.pdf" defaultColor="accent" activeColor="warn" cancelColor="primary" multiple [disabled]="disabled">
    <mat-icon>file_upload</mat-icon>
    <span>
    {{ fileMultipleUpload.value?.name || fileMultipleUpload.value?.length }} <span *ngIf="fileMultipleUpload.value?.length">files selected</span>
  </span>
    <ng-template td-file-input-label>
      <mat-icon>attach_file</mat-icon>
      <span>
      Choose documents
    </span>
    </ng-template>
  </td-file-upload>

  <div *ngIf="chequeReq.files">
    <p>Optionally provide descriptions for each document:</p>
    <ol *ngIf="isFile(chequeReq.files)">
      <li>
        <mat-form-field>
          <input matInput name="fileDescriptions" placeholder="Description for: {{chequeReq.files.name}}"  [(ngModel)]="chequeReq.fileDescriptions[chequeReq.files.name]"/>
        </mat-form-field>
      </li>
    </ol>
    <ol>
      <li *ngFor="let file of chequeReq.files">
        <mat-form-field>
          <input matInput name="fileDescriptions" placeholder="Description for: {{file.name}}" [(ngModel)]="chequeReq.fileDescriptions[file.name]"/>
        </mat-form-field>
      </li>
    </ol>
  </div>

  <br>
  <mat-checkbox [(ngModel)]="chequeReq.freeFood" name="freeFood">This cheque req includes food items that were distributed for free and not part of any paid event. (Ex: public forums,
    food for meetings)</mat-checkbox>
  <mat-form-field>
    <input matInput placeholder="Payable Addressee" [(ngModel)]="chequeReq.payableAddressee" name="payableAddressee" #payableAddressee="ngModel" required>
    <mat-error *ngIf="payableAddressee.errors?.required">
      You need to enter a payable addressee
    </mat-error>
  </mat-form-field>
  <mat-divider></mat-divider>
  <mat-checkbox [(ngModel)]="chequeReq.mailCheque" name="mailCheque">I would like this cheque to be mailed</mat-checkbox>
  <mat-form-field *ngIf="chequeReq.mailCheque">
    <input matInput placeholder="Mailing Address" [(ngModel)]="chequeReq.mailingAddress" name="mailingAddress" #mailingAddress="ngModel" required>
    <mat-error *ngIf="mailingAddress.errors?.required">
      You need to enter a mailing address
    </mat-error>
  </mat-form-field>
  <br>
  <button mat-raised-button color="primary" type="submit">Submit</button>
</form>
